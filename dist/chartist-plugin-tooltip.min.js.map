{"version":3,"sources":["chartist-plugin-tooltip.js"],"names":["root","factory","define","amd","Chartist","returnExportsGlobal","exports","module","require","this","window","document","show","element","hasClass","className","removeElement","documentMode","removeNode","remove","getAttribute","indexOf","defaultOptions","class","undefined","pointClass","plugins","tooltip","options","extend","chart","on","event","callback","$chart","addEventListener","e","renderTooltip","text","$toolTip","createElement","insertBefore","container","childNodes","height","offsetHeight","width","offsetWidth","setPosition","offsetX","offsetY","box","getBoundingClientRect","left","pageX","top","pageY","style","querySelector","$point","target","tooltipText","isPieChart","Pie","parentNode","seriesName","meta","value","hasMetaValue","Number","transformTooltipTextFnc","tooltipFnc","innerHTML","removeEventListener"],"mappings":";;;;;;CAAC,SAAUA,EAAMC,GACO,kBAAXC,SAAyBA,OAAOC,IAEzCD,QAAQ,qBAAsB,SAAUE,GACtC,MAAQJ,GAAKK,oBAAsBJ,EAAQG,KAEjB,gBAAZE,SAIhBC,OAAOD,QAAUL,EAAQO,QAAQ,sBAEjCR,EAAK,4BAA8BC,EAAQG,WAE7CK,KAAM,SAAUL,GAmHhB,MAjHC,UAAUM,EAAQC,EAAUP,GACzB,YA8FA,SAASQ,GAAKC,GACNC,EAASD,EAAS,kBAClBA,EAAQE,UAAYF,EAAQE,UAAY,iBAIhD,QAASC,GAAcH,GACbF,EAASM,aACXJ,EAAQK,YAAW,GAEnBL,EAAQM,SAIhB,QAASL,GAASD,EAASE,GACvB,OAAQ,IAAMF,EAAQO,aAAa,SAAW,KAAKC,QAAQ,IAAMN,EAAY,MAAQ,EA3GzF,GAAIO,IACAC,UAAOC,GACPC,WAAY,WAGhBrB,GAASsB,QAAUtB,EAASsB,YAC5BtB,EAASsB,QAAQC,QAAU,SAAUC,GAGjC,MAFAA,GAAUxB,EAASyB,UAAWP,EAAgBM,GAEvC,SAAiBE,GAKpB,QAASC,GAAGC,EAAOC,GACfC,EAAOC,iBAAiBH,EAAO,SAASI,GACpCH,EAASG,KA8CjB,QAASC,GAAcC,GACnBC,EAAW5B,EAAS6B,cAAc,OAClCD,EAASxB,UAAca,EAAQL,MAA8B,oBAAsBK,EAAQL,MAAnD,mBACxCW,EAAOO,aAAaF,EAAUT,EAAMY,UAAUC,WAAW,IACzDC,EAASL,EAASM,aAClBC,EAAQP,EAASQ,YAGrB,QAASC,GAAYhB,GACjB,GAAIO,EAAU,CACVK,EAASA,GAAUL,EAASM,aAC5BC,EAAQA,GAASP,EAASQ,WAC1B,IAAIE,IAAaH,EAAQ,EACrBI,GAAYN,EAAS,EAErBO,EAAMjB,EAAOkB,wBACbC,EAAOrB,EAAMsB,MAAQH,EAAIE,KACzBE,EAAMvB,EAAMwB,MAAQL,EAAII,GAE5BhB,GAASkB,MAAMF,IAAMA,EAAML,EAAU,KACrCX,EAASkB,MAAMJ,KAAOA,EAAOJ,EAAU,MAxE/C,GAEIL,GAAQE,EAFRZ,EAASJ,EAAMY,UACfH,EAAW5B,EAAS+C,cAAc,oBAStC3B,GAAG,YAAa,SAASC,GACjBO,GAAYvB,EAAcuB,EAC9B,IAAIoB,GAAS3B,EAAM4B,OACfC,EAAc,GAEdC,EAAchC,YAAiB1B,GAAS2D,IAAOJ,EAASA,EAAOK,WAC/DC,EAAa,EAAeN,EAAOK,WAAW5C,aAAa,YAAcuC,EAAOK,WAAW5C,aAAa,kBAAoB,GAC5H8C,EAAOP,EAAOvC,aAAa,YAAc6C,GAAc,GACvDE,EAAQR,EAAOvC,aAAa,YAC5BgD,IAAiBF,GAAQG,OAAOF,GAAS,CAEzCvC,GAAQ0C,yBAAsE,kBAApC1C,GAAQ0C,0BAClDH,EAAQvC,EAAQ0C,wBAAwBH,IAGxCvC,EAAQ2C,YAA4C,kBAAvB3C,GAAQ2C,YAA6BH,EAClEP,EAAc,sCAAwCjC,EAAQ2C,WAAWL,EAAMC,GAAS,UACjFC,IACPP,EAAc,wCAA0CK,EAAO,KAAOC,EAAQ,WAG9EN,IACAxB,EAAcwB,GACdtB,EAASiC,UAAYX,EACrBb,EAAYhB,GACZpB,EAAK2B,GAELK,EAASL,EAASM,aAClBC,EAAQP,EAASQ,eAIzBhB,EAAG,WAAY,WACPQ,GACAvB,EAAcuB,KAItBR,EAAG,YAAa,SAASC,GACrBgB,EAAYhB,KA2BhBE,EAAOuC,oBAAoB,YAAa1C,GACxCG,EAAOuC,oBAAoB,YAAa1C,GACxCG,EAAOuC,oBAAoB,WAAY1C,MAqBhDrB,OAAQC,SAAUP,GACdA,EAASsB,QAAQC","file":"chartist-plugin-tooltip.min.js","sourcesContent":["(function (root, factory) {\n  if (typeof define === 'function' && define.amd) {\n    // AMD. Register as an anonymous module.\n    define([\"chartist-logscale\"], function (Chartist) {\n      return (root.returnExportsGlobal = factory(Chartist));\n    });\n  } else if (typeof exports === 'object') {\n    // Node. Does not work with strict CommonJS, but\n    // only CommonJS-like enviroments that support module.exports,\n    // like Node.\n    module.exports = factory(require(\"chartist-logscale\"));\n  } else {\n    root['Chartist.plugins.tooltip'] = factory(Chartist);\n  }\n}(this, function (Chartist) {\n\n  (function (window, document, Chartist) {\r\n      'use strict';\r\n\r\n      var defaultOptions = {\r\n          class: undefined,\r\n          pointClass: 'ct-point'\r\n      };\r\n\r\n      Chartist.plugins = Chartist.plugins || {};\r\n      Chartist.plugins.tooltip = function (options) {\r\n          options = Chartist.extend({}, defaultOptions, options);\r\n\r\n          return function tooltip(chart) {\r\n              var $chart = chart.container;\r\n              var $toolTip = document.querySelector('.chartist-tooltip');\r\n              var height, width;\r\n\r\n              function on(event, callback) {\r\n                  $chart.addEventListener(event, function(e) {\r\n                      callback(e);\r\n                  });\r\n              }\r\n\r\n              on('mouseover', function(event) {\r\n                  if ($toolTip) { removeElement($toolTip); }\r\n                  var $point = event.target;\r\n                  var tooltipText = '';\r\n\r\n                  var isPieChart = (chart instanceof Chartist.Pie) ? $point : $point.parentNode;\r\n                  var seriesName = (isPieChart) ? $point.parentNode.getAttribute('ct:meta') || $point.parentNode.getAttribute('ct:series-name') : '';\r\n                  var meta = $point.getAttribute('ct:meta') || seriesName || '';\r\n                  var value = $point.getAttribute('ct:value');\r\n                  var hasMetaValue = !!meta && Number(value) > 0;\r\n\r\n                  if (options.transformTooltipTextFnc && typeof options.transformTooltipTextFnc === 'function') {\r\n                      value = options.transformTooltipTextFnc(value);\r\n                  }\r\n\r\n                  if (options.tooltipFnc && typeof options.tooltipFnc === 'function' && hasMetaValue) {\r\n                      tooltipText = '<span class=chartist-tooltip-value>' + options.tooltipFnc(meta, value) + '</span>';\r\n                  } else if (hasMetaValue) {\r\n                      tooltipText = '<span class=\"chartist-tooltip-value\">' + meta + ': ' + value + '</span>';\r\n                  }\r\n\r\n                  if (tooltipText) {\r\n                      renderTooltip(tooltipText);\r\n                      $toolTip.innerHTML = tooltipText;\r\n                      setPosition(event);\r\n                      show($toolTip);\r\n\r\n                      height = $toolTip.offsetHeight;\r\n                      width = $toolTip.offsetWidth;\r\n                  }\r\n              });\r\n\r\n              on('mouseout', function() {\r\n                  if ($toolTip) {\r\n                      removeElement($toolTip);\r\n                  }\r\n              });\r\n\r\n              on('mousemove', function(event) {\r\n                  setPosition(event);\r\n              });\r\n\r\n              function renderTooltip(text) {\r\n                  $toolTip = document.createElement('div');\r\n                  $toolTip.className = (!options.class) ? 'chartist-tooltip' : 'chartist-tooltip ' + options.class;\r\n                  $chart.insertBefore($toolTip, chart.container.childNodes[0]);\r\n                  height = $toolTip.offsetHeight;\r\n                  width = $toolTip.offsetWidth;\r\n              }\r\n\r\n              function setPosition(event) {\r\n                  if ($toolTip) {\r\n                      height = height || $toolTip.offsetHeight;\r\n                      width = width || $toolTip.offsetWidth;\r\n                      var offsetX = - (width / 2);\r\n                      var offsetY = - height - 8;\r\n\r\n                      var box = $chart.getBoundingClientRect();\r\n                      var left = event.pageX - box.left;\r\n                      var top = event.pageY - box.top;\r\n\r\n                      $toolTip.style.top = top + offsetY + 'px';\r\n                      $toolTip.style.left = left + offsetX + 'px';\r\n                  }\r\n              }\r\n\r\n              $chart.removeEventListener('mouseover', on);\r\n              $chart.removeEventListener('mousemove', on);\r\n              $chart.removeEventListener('mouseout', on);\r\n          };\r\n      };\r\n\r\n      function show(element) {\r\n          if(!hasClass(element, 'tooltip-show')) {\r\n              element.className = element.className + ' tooltip-show';\r\n          }\r\n      }\r\n\r\n      function removeElement(element) {\r\n          if (!!document.documentMode) {\r\n              element.removeNode(true);\r\n          } else {\r\n              element.remove();\r\n          }\r\n      }\r\n\r\n      function hasClass(element, className) {\r\n          return (' ' + element.getAttribute('class') + ' ').indexOf(' ' + className + ' ') > -1;\r\n      }\r\n  } (window, document, Chartist));\n  return Chartist.plugins.tooltip;\n\n}));\n"]}